---
common:
  default_window: rcs_client
parameters:
  robot_name: diffbot
  map_name: ts_1st
  world_name: map_ts_1st #map_ts_1st_no_marker
  min_height_for_move: 0.0
  map_filter_name: aksk_keepout
  use_simulator: True
  headless: True
  camera_name: camera
  rviz_name: limo_nav.rviz
  server_address: wataru-orin
  cmd_vel_topic: /diff_cont/cmd_vel_unstamped
windows:
  - name: lidar_util
    commands:
      - ros2 launch robot_navigation velodyne_to_scan.launch.py min_height_for_move:=${min_height_for_move}
  # - name: trimmed_points
  #   commands:
  #     - ros2 launch pointcloud_trim point_cloud_trim.launch.py 
  - name: aksk_wolrd
    commands:
      - ros2 launch sim_worlds2 launch_world.launch.py use_simulator:=${use_simulator} headless:=${headless} world_name:=${world_name} rviz_file:=${rviz_name}
  - name: spawn_diffbot
    commands:
      - ros2 launch sim_worlds2 spawn_diffbot.launch.py spawn_x_val:=3.0 spawn_y_val:=6.8
  - name: tag_server
    commands:
      - ros2 launch map_handler marker_reader.launch.py map_name:=${map_name} camera_name:=${camera_name}
  - name: map_server
    commands:
      - sleep 3
      - ros2 launch map_handler load_map.launch.py map_name:=${map_name}
  - name: lio_sam_node
    commands:
      - sleep 1
      - ros2 launch lio_sam slam.launch.py
  - name: lio_sam_nav
    commands:
      - sleep 5
      - ros2 launch lio_sam lio_sam_nav.launch.py map_name:=${map_name}
  - name: goal_handler
    commands:
      - ros2 launch goal_handler goal_handler.launch.py map_name:=${map_name}
  - name: show_rviz
    commands:
      - ros2 launch sim_worlds2 show_rviz.launch.py rviz_name:=${rviz_name}
  - name: rcs_client  
    commands:
      # - sleep 1
      # - export RCS_SERVER_ADDRESS=${server_address}
      # - export ROBOT_NAME=${robot_name}
      # - export MAP_ID=${map_name}
      - ros2 launch rcs_client lio_sam_rcs_client.launch.py cmd_vel_topic:=${cmd_vel_topic}
